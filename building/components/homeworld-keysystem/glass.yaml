control:
  name: homeworld-keysystem
  version: 0.1.22
  date: 2018-07-30T21:58:00-0700
  type: deb
  depends:
  - homeworld-knc

build:
  - type: upstream-extract
    upstream: golang-x-crypto-%.tar.xz
    version: 5ef0053f77724838734b6945dd364d3847e5de1d
    focus: src/golang.org
    stage: go/src/golang.org

  - type: upstream-extract
    upstream: gopkg.in-yaml.v2-%.tar.xz
    version: eb3733d160e74a9c7e442f435eb3bea458e1d19f
    focus: src/gopkg.in
    stage: go/src/gopkg.in

  - type: go-build
    version: 1.9.3
    packages:
      - keysystem/keyserver/main
    gopath: /h:go
    stage: bin/keyserver

  - type: go-build
    version: 1.9.3
    packages:
      - keysystem/keygateway/main
    gopath: /h:go
    stage: bin/keygateway

  - type: go-build
    version: 1.9.3
    packages:
      - keysystem/keyclient/main
    gopath: /h:go
    stage: bin/keyclient

  - type: go-build
    version: 1.9.3
    packages:
      - keysystem/keygen/main
    gopath: /h:go
    stage: bin/keygen

  - type: go-build
    version: 1.9.3
    packages:
      - keysystem/keyinitadmit/main
    gopath: /h:go
    stage: bin/keyinitadmit

  - type: go-build
    version: 1.9.3
    packages:
      - keysystem/keylocalcert/main
    gopath: /h:go
    stage: bin/keylocalcert

  - type: go-build
    version: 1.9.3
    packages:
      - keysystem/keyreq/main
    gopath: /h:go
    stage: bin/keyreq

  - type: copy
    stage: bin
    output: /usr/bin
    recursive: true

  - type: copy
    input: services
    output: /usr/lib/systemd/system/
    recursive: true

  - type: copy
    input: wrappers
    output: /usr/lib/homeworld/
    recursive: true
