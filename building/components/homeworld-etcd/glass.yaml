control:
  name: homeworld-etcd
  version: 3.2.9-6
  date: 2018-01-29T17:20:49-0500
  type: deb

build:
  - type: upstream-extract
    upstream: etcd-%.tar.xz
    version: 3.2.9
    focus: etcd-%
    stage: etcd-source

  - type: go-prepare
    version: 1.9.3
    stage: goroot

  - type: bash
    code: |
      unset GOPATH
      export GOROOT="${STAGE}/goroot"
      export PATH="${GOROOT}/bin:${PATH}"
      cd etcd-source
      echo "launching etcd build. this may take a while..."
      ./build

  - type: copy
    stage: etcd-source/bin
    output: /usr/bin/
    recursive: true
