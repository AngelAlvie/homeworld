commit bfc2d7bdd7813654226254edb9d256b1baafa4a0
Author: Jeff Grafton <jgrafton@google.com>
Date:   Thu May 3 15:37:33 2018 -0700

    gazelle: disable proto rules

diff --git a/build/root/BUILD.root b/build/root/BUILD.root
index 2de430729a..38e89c12e9 100644
--- a/build/root/BUILD.root
+++ b/build/root/BUILD.root
@@ -4,6 +4,10 @@
 # gazelle:exclude _tmp
 # gazelle:prefix k8s.io/kubernetes
 
+# Disable proto rules, since the Go sources are currently generated by
+# hack/update-generated-protobuf.sh and checked into the repo.
+# gazelle:proto disable
+
 package(default_visibility = ["//visibility:public"])
 
 load("@io_bazel_rules_go//go:def.bzl", "go_prefix")
diff --git a/hack/update-bazel.sh b/hack/update-bazel.sh
index cce18c0aa9..14d57eff4b 100755
--- a/hack/update-bazel.sh
+++ b/hack/update-bazel.sh
@@ -40,7 +40,6 @@ touch "${KUBE_ROOT}/vendor/BUILD"
 gazelle fix \
     -build_file_name=BUILD,BUILD.bazel \
     -external=vendored \
-    -proto=legacy \
     -mode=fix
 # gazelle gets confused by our staging/ directory, prepending an extra
 # "k8s.io/kubernetes/staging/src" to the import path.
